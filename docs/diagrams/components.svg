<svg xmlns="http://www.w3.org/2000/svg" width="1200" height="800" viewBox="0 0 1200 800">
  <defs>
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L9,3 L0,6 z" fill="#1a1a1a" />
    </marker>
  </defs>
  <rect x="0" y="0" width="1200" height="800" fill="#ffffff" />
  <style>
    .title { font: 700 20px 'Helvetica Neue', Arial, sans-serif; fill: #111; }
    .label { font: 600 14px 'Helvetica Neue', Arial, sans-serif; fill: #111; }
    .small { font: 12px 'Helvetica Neue', Arial, sans-serif; fill: #333; }
    .box { fill: #f3f4f6; stroke: #1f2937; stroke-width: 1.2; }
    .group { fill: #ffffff; stroke: #d1d5db; stroke-width: 1.2; }
    .arrow { stroke: #1f2937; stroke-width: 1.4; marker-end: url(#arrow); }
  </style>

  <text x="30" y="30" class="title">System / Component Diagram</text>

  <!-- Client -->
  <rect class="box" x="40" y="80" width="160" height="50" rx="6" />
  <text class="label" x="120" y="110" text-anchor="middle">Client (Web/CLI)</text>

  <!-- API group -->
  <rect class="group" x="250" y="60" width="260" height="160" rx="8" />
  <text class="label" x="380" y="85" text-anchor="middle">API (Fastify)</text>
  <rect class="box" x="270" y="100" width="220" height="45" rx="6" />
  <text class="small" x="380" y="128" text-anchor="middle">/api/chat</text>
  <rect class="box" x="270" y="150" width="220" height="45" rx="6" />
  <text class="small" x="380" y="178" text-anchor="middle">Error Handler</text>

  <!-- Runtime group -->
  <rect class="group" x="550" y="60" width="320" height="240" rx="8" />
  <text class="label" x="710" y="85" text-anchor="middle">Bot Runtime</text>
  <rect class="box" x="570" y="100" width="280" height="45" rx="6" />
  <text class="small" x="710" y="128" text-anchor="middle">MessageOrchestrator</text>
  <rect class="box" x="570" y="150" width="130" height="45" rx="6" />
  <text class="small" x="635" y="178" text-anchor="middle">SkillMatcher</text>
  <rect class="box" x="720" y="150" width="130" height="45" rx="6" />
  <text class="small" x="785" y="178" text-anchor="middle">PromptComposer</text>
  <rect class="box" x="570" y="200" width="130" height="45" rx="6" />
  <text class="small" x="635" y="228" text-anchor="middle">ResponseProcessor</text>
  <rect class="box" x="720" y="200" width="130" height="45" rx="6" />
  <text class="small" x="785" y="228" text-anchor="middle">SkillProposer</text>

  <!-- Data group -->
  <rect class="group" x="250" y="260" width="260" height="170" rx="8" />
  <text class="label" x="380" y="285" text-anchor="middle">Data</text>
  <rect class="box" x="270" y="300" width="220" height="45" rx="6" />
  <text class="small" x="380" y="328" text-anchor="middle">Repositories</text>
  <rect class="box" x="270" y="350" width="220" height="45" rx="6" />
  <text class="small" x="380" y="378" text-anchor="middle">Redis Cache</text>
  <rect class="box" x="270" y="400" width="220" height="45" rx="6" />
  <text class="small" x="380" y="428" text-anchor="middle">Postgres</text>

  <!-- LLM group -->
  <rect class="group" x="550" y="330" width="320" height="220" rx="8" />
  <text class="label" x="710" y="355" text-anchor="middle">LLM Gateway</text>
  <rect class="box" x="570" y="370" width="280" height="45" rx="6" />
  <text class="small" x="710" y="398" text-anchor="middle">TrackedLLMGateway</text>
  <rect class="box" x="570" y="420" width="130" height="45" rx="6" />
  <text class="small" x="635" y="448" text-anchor="middle">LLMGateway</text>
  <rect class="box" x="720" y="420" width="130" height="45" rx="6" />
  <text class="small" x="785" y="448" text-anchor="middle">UsageTracker</text>
  <rect class="box" x="570" y="470" width="130" height="45" rx="6" />
  <text class="small" x="635" y="498" text-anchor="middle">Anthropic</text>
  <rect class="box" x="720" y="470" width="130" height="45" rx="6" />
  <text class="small" x="785" y="498" text-anchor="middle">OpenAI</text>

  <!-- Tools -->
  <rect class="group" x="900" y="60" width="260" height="170" rx="8" />
  <text class="label" x="1030" y="85" text-anchor="middle">Tools</text>
  <rect class="box" x="920" y="100" width="220" height="45" rx="6" />
  <text class="small" x="1030" y="128" text-anchor="middle">Tool Registry</text>
  <rect class="box" x="920" y="150" width="220" height="45" rx="6" />
  <text class="small" x="1030" y="178" text-anchor="middle">HTTP Executor</text>

  <!-- Arrows -->
  <line class="arrow" x1="200" y1="105" x2="250" y2="120" />
  <line class="arrow" x1="510" y1="120" x2="550" y2="120" />
  <line class="arrow" x1="710" y1="145" x2="710" y2="330" />
  <line class="arrow" x1="710" y1="300" x2="380" y2="300" />
  <line class="arrow" x1="850" y1="390" x2="900" y2="150" />
  <line class="arrow" x1="710" y1="250" x2="1030" y2="100" />
</svg>
